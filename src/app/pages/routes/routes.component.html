<div class="page">
  <div>
    <h3>Gestión de rutas</h3>
    <p>Define recorridos, paraderos y colores de identificación.</p>
  </div>

  <div class="grid">
    <form class="card form" [formGroup]="formulario" (ngSubmit)="enviar()">
      <h4>Nueva ruta</h4>

      <label>
        ID
        <input class="input" formControlName="id" placeholder="R-01" />
        <span class="form-error" *ngIf="errorPara('id')">{{ errorPara('id') }}</span>
      </label>

      <label>
        Código
        <input class="input" formControlName="codigo" placeholder="R-NC" />
        <span class="form-error" *ngIf="errorPara('codigo')">{{ errorPara('codigo') }}</span>
      </label>

      <label>
        Nombre
        <input class="input" formControlName="nombre" placeholder="Norte Centro" />
        <span class="form-error" *ngIf="errorPara('nombre')">{{ errorPara('nombre') }}</span>
      </label>

      <label>
        Origen
        <input class="input" formControlName="origen" placeholder="Terminal Norte" />
        <span class="form-error" *ngIf="errorPara('origen')">{{ errorPara('origen') }}</span>
      </label>

      <label>
        Destino
        <input class="input" formControlName="destino" placeholder="Centro Histórico" />
        <span class="form-error" *ngIf="errorPara('destino')">{{ errorPara('destino') }}</span>
      </label>

      <label>
        Paraderos
        <input class="input" type="number" formControlName="paradas" />
        <span class="form-error" *ngIf="errorPara('paradas')">{{ errorPara('paradas') }}</span>
      </label>

      <label>
        Distancia (km)
        <input class="input" type="number" formControlName="distanciaKm" />
        <span class="form-error" *ngIf="errorPara('distanciaKm')">{{ errorPara('distanciaKm') }}</span>
      </label>

      <label>
        Color de ruta
        <input class="input" type="color" formControlName="colorHex" />
        <span class="form-error" *ngIf="errorPara('colorHex')">{{ errorPara('colorHex') }}</span>
      </label>

      <button class="btn btn-primary" type="submit" [disabled]="guardando">
        {{ guardando ? 'Guardando...' : 'Registrar ruta' }}
      </button>
    </form>

    <div class="card list">
      <h4>Rutas registradas</h4>
      <div class="list-body" *ngIf="rutas$ | async as rutas">
        <div class="row" *ngFor="let ruta of rutas">
          <div>
            <strong>{{ ruta.nombre }}</strong>
            <span>{{ ruta.origen }} → {{ ruta.destino }}</span>
          </div>
          <div class="meta">
            <span class="chip" [style.background]="ruta.colorHex"></span>
            <span>{{ ruta.codigo }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
